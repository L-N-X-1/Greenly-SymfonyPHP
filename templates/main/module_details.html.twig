{% extends 'main/barre.html.twig' %}

{% block body %}
<div class="container my-5">
    <h2 class="text-center text-success">{{ module.nomModule }}</h2>
    <p class="text-center text-muted">{{ module.descriptionModule }}</p>

    <!-- Informations G√©n√©rales du Module -->
    <div class="row my-4">
        <div class="col-md-6">
            <div class="card shadow-lg border-0 p-3">
                <h4 class="text-primary">üìå Informations G√©n√©rales</h4>
                <p><strong>Cat√©gorie :</strong> {{ module.categorie }}</p>
                <p><strong>Niveau :</strong> {{ module.niveau }}</p>
                <p><strong>Statut :</strong> {{ module.statut ? '‚úÖ Actif' : '‚ùå Inactif' }}</p>
                <p><strong>Cr√©√© le :</strong> {{ module.datecreationModule|date('d/m/Y') }}</p>
            </div>
        </div>

        <!-- Section Statistiques avec Design Am√©lior√© -->
        <div class="col-md-6">
            <div class="card shadow-lg border-0 p-3">
                <h4 class="text-primary">üìä Statistiques du Module</h4>
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <p><strong>Nombre de formations :</strong> {{ totalFormations }}</p>
                        <p><strong>Dur√©e totale :</strong> {{ dureeFormation }} heures</p>
                        <p><strong>Dur√©e de module :</strong> {{ module.getNbHeures }} heures</p>
                    </div>
                    <!-- Ic√¥nes et Design Am√©lior√© -->
                    <div>
                        <i class="fas fa-graduation-cap fa-3x text-success"></i>
                    </div>
                </div>

          <!-- Calcul de la barre de progression -->
{% set pourcentageProgression = (dureeFormation / module.getNbHeures()) * 100 %}

<!-- Barre de progression -->
<div class="progress my-3" style="height: 10px;">
<div class="progress-bar bg-primary" role="progressbar" style="width: {{ pourcentageProgression }}%" aria-valuenow="{{ totalFormations }}" aria-valuemin="0" aria-valuemax="{{ module.getNbHeures() }}">
</div>      
  {% set pourcentageProgression = (totalFormations / module.getNbHeures()) * 100 %}

    </div>
</div>



            </div>
        </div>
    </div>

    <!-- Formations incluses dans le module -->
    <h3 class="text-center my-4">üìö Formations Incluses</h3>
    <div class="row g-4">
        {% for formation in formations %}
            <div class="col-md-4">
                <div class="card shadow-lg border-0">
                    <div class="card-body">
                        <h5 class="card-title text-success">{{ formation.nomFormation }}</h5>
                        <p class="card-text">{{ formation.descriptionFormation|slice(0, 100) }}...</p>
                        <a href="{{ path('app_formations', { id: formation.id }) }}" class="btn btn-outline-success">Voir plus</a>
                    </div>
                </div>
            </div>
        {% else %}
            <p class="text-center text-muted">Aucune formation disponible pour ce module.</p>
        {% endfor %}
    </div>

    <!-- Section des Avis d'Entreprises -->
    <h3 class="text-center my-5">üìù Avis des Entreprises</h3>
    <div class="row g-4">
        <!-- Avis 1 -->
        <div class="col-md-4">
            <div class="card shadow-lg border-0 p-3">
                <div class="card-body">
                    <h5 class="card-title text-primary">EcoCycle Solutions</h5>
                    <p class="card-text">"Cette formation est excellente! Elle a permis √† nos employ√©s de renforcer leurs comp√©tences et d‚Äôam√©liorer leur productivit√©. Nous recommandons vivement!"</p>
                    <small class="text-muted">Publi√© le: 12/02/2025</small>
                </div>
            </div>
        </div>
        <!-- Avis 2 -->
        <div class="col-md-4">
            <div class="card shadow-lg border-0 p-3">
                <div class="card-body">
                    <h5 class="card-title text-primary">Green Earth Recycling</h5>
                    <p class="card-text">"Le contenu de la formation √©tait clair, bien structur√© et tr√®s utile pour nos √©quipes techniques. Merci pour cette belle initiative!"</p>
                    <small class="text-muted">Publi√© le: 05/02/2025</small>
                </div>
            </div>
        </div>
        <!-- Avis 3 -->
        <div class="col-md-4">
            <div class="card shadow-lg border-0 p-3">
                <div class="card-body">
                    <h5 class="card-title text-primary">Recytech Industries</h5>
                    <p class="card-text">"Une formation de grande qualit√©, avec des formateurs exp√©riment√©s. Elle a parfaitement r√©pondu √† nos attentes et besoins." </p>
                    <small class="text-muted">Publi√© le: 01/02/2025</small>
                </div>
            </div>
        </div>
    </div>

</div>

{% endblock %}
